in the commitment transaction, the HTLC output contain the following data:


"scriptPubKey": {
    "asm": "0 d222c64910f02ebb3e9b5fb2fe39c37bf0e9a0d80926e0246a58bc0c42f7bf2f",
    "hex": "0020d222c64910f02ebb3e9b5fb2fe39c37bf0e9a0d80926e0246a58bc0c42f7bf2f",
    "reqSigs": 1,
    "type": "witness_v0_scripthash",
    "addresses": [
        "bcrt1q6g3vvjgs7qhtk05mt7e0uwwr00cwngxcpynwqfr2tz7qcshhhuhs5apqzp"
    ]
}



in the transaction spending the HTLC output, the witness data is included (in the txin section):

"txinwitness": [
    "",
    "304402204553966ab7bbeab8e33c0a9ff3c1fb3ea6dd5de5c181c0946544a3ae6129647c022069ea76041f22c2bfd812c44d84df1bd227a3f9a7c607d7355f045d15b7faa94c01",
    "3044022028083fcaef53d74dff45e83eece85689a6db0175e8adb38eebc9fcb4d6593ae002202f04cb6bd13cc793ad16c34397b23233f91b61b18854b809d5eba4136149c4cb01",
    "",
    "76a914ea5a8bd24440c0619121b001a1041e7c277fed1f8763ac6721032f66d517303ab12adae84fcc2c8b111a1b98cf227d961918977dfa6df2475d2c7c820120876475527c2103a441c94be5204a2abe50fdda7b352b3d6be1843d55895db94b014c911fb944df52ae67a91484561204188748004fb8c398dc5c38207ae0b24c88ac6868"
],


the last element is the encoded script:

> bitcoin-cli decodescript 76a914ea5a8bd24440c0619121b001a1041e7c277fed1f8763ac6721032f66d517303ab12adae84fcc2c8b111a1b98cf227d961918977dfa6df2475d2c7c820120876475527c2103a441c94be5204a2abe50fdda7b352b3d6be1843d55895db94b014c911fb944df52ae67a91484561204188748004fb8c398dc5c38207ae0b24c88ac6868

{
  "asm": "OP_DUP OP_HASH160 ea5a8bd24440c0619121b001a1041e7c277fed1f OP_EQUAL OP_IF OP_CHECKSIG OP_ELSE 032f66d517303ab12adae84fcc2c8b111a1b98cf227d961918977dfa6df2475d2c OP_SWAP OP_SIZE 32 OP_EQUAL OP_NOTIF OP_DROP 2 OP_SWAP 03a441c94be5204a2abe50fdda7b352b3d6be1843d55895db94b014c911fb944df 2 OP_CHECKMULTISIG OP_ELSE OP_HASH160 84561204188748004fb8c398dc5c38207ae0b24c OP_EQUALVERIFY OP_CHECKSIG OP_ENDIF OP_ENDIF",
  "type": "nonstandard",
  "p2sh": "2N7etTGgFcMpc336YWtLMjjVVbQtQc1qEEu",
  "segwit": {
    "asm": "0 d222c64910f02ebb3e9b5fb2fe39c37bf0e9a0d80926e0246a58bc0c42f7bf2f",
    "hex": "0020d222c64910f02ebb3e9b5fb2fe39c37bf0e9a0d80926e0246a58bc0c42f7bf2f",
    "reqSigs": 1,
    "type": "witness_v0_scripthash",
    "addresses": [
      "bcrt1q6g3vvjgs7qhtk05mt7e0uwwr00cwngxcpynwqfr2tz7qcshhhuhs5apqzp"
    ],
    "p2sh-segwit": "2NEneNxwnHepcgAXzp4LoL1DZikKhHxJiku"
  }
}




OP_DUP
OP_HASH160
ea5a8bd24440c0619121b001a1041e7c277fed1f
OP_EQUAL # Returns 1 if the inputs are exactly equal, 0 otherwise
OP_IF # If the top stack value is not False, the statements are executed. The top stack value is removed.
    OP_CHECKSIG
OP_ELSE
    032f66d517303ab12adae84fcc2c8b111a1b98cf227d961918977dfa6df2475d2c
    OP_SWAP # The top two items on the stack are swapped
    OP_SIZE # Pushes the string length of the top element of the stack (without popping it).
    32
    OP_EQUAL
    OP_NOTIF
        OP_DROP # Removes the top stack item
        2
        OP_SWAP # The top two items on the stack are swapped
        03a441c94be5204a2abe50fdda7b352b3d6be1843d55895db94b014c911fb944df
        2
        OP_CHECKMULTISIG
    OP_ELSE
        OP_HASH160
        84561204188748004fb8c398dc5c38207ae0b24c
        OP_EQUALVERIFY # fail the script if top 2 items are not equal
        OP_CHECKSIG
    OP_ENDIF
OP_ENDIF
